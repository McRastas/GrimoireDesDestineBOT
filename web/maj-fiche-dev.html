<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ G√©n√©rateur de Mise √† Jour de Fiche D&D - DEV</title>
    <link rel="stylesheet" href="styles-unified.css">
</head>
<body>
    <div class="dev-badge">
        üöß VERSION D√âVELOPPEMENT
    </div>

    <div class="nav-links">
        <a href="index.html" class="nav-link">üé≤ Calculateur PV</a>
        <a href="maj-fiche-dev.html" class="nav-link">üìù G√©n√©rateur Fiche (DEV)</a>
    </div>

    <div class="container">
        <div class="header">
            <h1>üé≤ G√©n√©rateur de Mise √† Jour de Fiche</h1>
            <p>Cr√©ez facilement vos messages Discord de mise √† jour D&D 5e</p>
            <div class="mt-10" style="font-size: 0.9rem; opacity: 0.8;">
                üöß Version de d√©veloppement - Fonctionnalit√©s en cours de test
            </div>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h3>üìã Informations du Personnage</h3>
                
                <div class="form-group">
                    <label for="nom-pj">Nom du PJ :</label>
                    <input type="text" id="nom-pj" placeholder="Nom de votre personnage" required>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="multiclasse-toggle">
                    <label for="multiclasse-toggle">Personnage multiclass√©</label>
                </div>

                <div id="classe-simple" class="form-group">
                    <label for="classe">Classe :</label>
                    <select id="classe" required>
                        <option value="" disabled selected>S√©lectionnez une classe</option>
                        <option value="Artificier">Artificier</option>
                        <option value="Barbare">Barbare</option>
                        <option value="Barde">Barde</option>
                        <option value="Clerc">Clerc</option>
                        <option value="Druide">Druide</option>
                        <option value="Ensorceleur">Ensorceleur</option>
                        <option value="Guerrier">Guerrier</option>
                        <option value="Magicien">Magicien</option>
                        <option value="Moine">Moine</option>
                        <option value="Occultiste">Occultiste</option>
                        <option value="Paladin">Paladin</option>
                        <option value="R√¥deur">R√¥deur</option>
                        <option value="Roublard">Roublard</option>
                        <option value="Sorcier">Sorcier</option>
                    </select>
                </div>

                <div id="classe-multi" class="form-group hidden">
                    <label>Classes (ex: Magicien 13 / Artificier 1) :</label>
                    <input type="text" id="classe-complete" placeholder="Magicien 13 / Artificier 1">
                    <div class="help-text">Format : Classe1 Niveau / Classe2 Niveau / ...</div>
                </div>

                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="showTab('quete', event)">üéØ Qu√™te</button>
                        <button class="tab-btn" onclick="showTab('niveau', event)">üìà Niveau</button>
                        <button class="tab-btn" onclick="showTab('capacites', event)">üõ°Ô∏è Capacit√©s</button>
                        <button class="tab-btn" onclick="showTab('items', event)">üéí Items</button>
                        <button class="tab-btn" onclick="showTab('argent', event)">üí∞ Argent</button>
                        <button class="tab-btn" onclick="showTab('special', event)">‚≠ê Sp√©cial</button>
                    </div>

                    <!-- Tab Content: Qu√™te -->
                    <div id="tab-quete" class="tab-content active">
                        <div id="quetes-container">
                            <div class="quete-bloc" data-quete="0">
                                <h4 class="mb-15" style="color: #3498db;">üéØ Qu√™te 1</h4>
                                
                                <div class="form-group">
                                    <label for="titre-quete-0">Titre de la Qu√™te :</label>
                                    <input type="text" id="titre-quete-0" placeholder="L'Art de la Paix">
                                </div>

                                <div class="form-group">
                                    <label for="nom-mj-0">Nom du MJ :</label>
                                    <input type="text" id="nom-mj-0" placeholder="@hugotlieb">
                                </div>

                                <div class="checkbox-group">
                                    <input type="checkbox" id="quete-multiple-0">
                                    <label for="quete-multiple-0">Qu√™te avec plusieurs sessions</label>
                                </div>

                                <div id="quete-simple-0" class="form-group">
                                    <label for="lien-recompense-0">Lien vers les r√©compenses :</label>
                                    <input type="text" id="lien-recompense-0" placeholder="https://discord.com/channels/...">
                                    <div class="help-text">Clic droit sur le message ‚Üí Copier le lien</div>
                                </div>

                                <div id="quete-multiple-details-0" class="form-group hidden">
                                    <label for="sessions-quete-0">Sessions de la qu√™te :</label>
                                    <textarea id="sessions-quete-0" rows="4" placeholder="- https://discord.com/channels/.../... + 1XP,&#10;- https://discord.com/channels/.../... + 1 XP - 1 item"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="xp-quete-0">XP de cette qu√™te :</label>
                                    <input type="number" id="xp-quete-0" placeholder="2" min="0" max="10">
                                </div>

                                <div class="checkbox-group">
                                    <input type="checkbox" id="refuse-xp-0">
                                    <label for="refuse-xp-0">Refuser l‚ÄôXP de cette qu√™te</label>
                                </div>

                                <div class="form-group">
                                    <h5 class="mb-10" style="color: #2c3e50;">üéÅ R√©compenses (optionnelles) :</h5>

                                    <div class="checkbox-group">
                                        <input type="checkbox" id="include-monnaies-0">
                                        <label for="include-monnaies-0">Inclure monnaies</label>
                                    </div>
                                    <div id="monnaie-container-0" class="hidden">
                                        <div id="finances-lignes-0" class="finances-lignes">
                                            <div class="finance-ligne" data-finance="0">
                                                <input type="text" class="finance-desc" placeholder="Description (ex: R√©compense session 1)">
                                                <select class="finance-type">
                                                    <option value="gain">+ Gain</option>
                                                    <option value="depense">- D√©pense</option>
                                                </select>
                                                <div class="finance-monnaies">
                                                    <input type="number" class="finance-pc" placeholder="PC">
                                                    <input type="number" class="finance-pa" placeholder="PA">
                                                    <input type="number" class="finance-po" placeholder="PO">
                                                    <input type="number" class="finance-pp" placeholder="PP">
                                                </div>
                                                <button type="button" class="delete-finance-ligne hidden">üóëÔ∏è</button>
                                            </div>
                                        </div>
                                        <button type="button" class="add-finance-ligne" data-quete="0">‚ûï Ajouter une ligne</button>
                                        <input type="text" id="total-quete-or-0" placeholder="Total en PO" disabled style="margin-top: 5px;">
                                    </div>

                                    <div class="checkbox-group">
                                        <input type="checkbox" id="include-objets-0">
                                        <label for="include-objets-0">Inclure objets</label>
                                    </div>
                                    <div id="objets-container-0" class="hidden">
                                        <textarea id="objets-quete-0" rows="2" placeholder="2 √©meraudes d'une valeur de 200PO, un √©trange engrenage en rotation perp√©tuelle"></textarea>
                                        <div class="totaux-quete-section">
                                            <label for="totaux-quete-0">Totaux d'inventaire apr√®s loot :</label>
                                            <textarea id="totaux-quete-0" rows="2" placeholder="Total Potion de Gu√©rison sup√©rieure(8d4+8) ==> 2&#10;Total Rations ==> 10"></textarea>
                                            <div class="help-text">Nouveau total d'un objet consommable apr√®s cette qu√™te</div>
                                        </div>
                                    </div>

                                    <div class="reward-type">
                                        <label>‚≠ê Autres r√©compenses :</label>
                                        <textarea id="autres-quete-0" rows="2" placeholder="Don du fruit blanc √† Korn√©lius, Sort Interdiction dans le grimoire"></textarea>
                                    </div>
                                </div>

                                <button type="button" class="delete-quete hidden" onclick="deleteQuete(0)">
                                    üóëÔ∏è Supprimer cette qu√™te
                                </button>
                            </div>
                        </div>
                        
                        <button type="button" class="add-quete" onclick="addQuete()">
                            ‚ûï Ajouter une autre qu√™te
                        </button>
                    </div>

                    <!-- Autres onglets... -->
                    <div id="tab-niveau" class="tab-content">
                        <div class="form-group">
                            <label for="xp-actuels">XP Actuels :</label>
                            <input type="number" id="xp-actuels" placeholder="3" min="0" max="10">
                            <div class="help-text">Points d'XP d√©j√† obtenus</div>
                        </div>

                        <div class="form-group">
                            <label for="niveau-actuel">Niveau actuel :</label>
                            <input type="number" id="niveau-actuel" placeholder="11" min="1" max="20">
                        </div>

                        <div class="form-group">
                            <label for="niveau-cible">Niveau vis√© :</label>
                            <input type="number" id="niveau-cible" placeholder="12" min="1" max="20">
                            <div class="help-text">Indiquez le niveau apr√®s gain d'XP</div>
                        </div>

                        <div class="form-group">
                            <label for="classe-gain-niveau">Classe gagn√©e :</label>
                            <select id="classe-gain-niveau">
                                <option value="">S√©lectionnez une classe</option>
                                <option value="Artificier">Artificier</option>
                                <option value="Barbare">Barbare</option>
                                <option value="Barde">Barde</option>
                                <option value="Clerc">Clerc</option>
                                <option value="Druide">Druide</option>
                                <option value="Ensorceleur">Ensorceleur</option>
                                <option value="Guerrier">Guerrier</option>
                                <option value="Magicien">Magicien</option>
                                <option value="Moine">Moine</option>
                                <option value="Occultiste">Occultiste</option>
                                <option value="Paladin">Paladin</option>
                                <option value="R√¥deur">R√¥deur</option>
                                <option value="Roublard">Roublard</option>
                                <option value="Sorcier">Sorcier</option>
                            </select>
                            <div class="help-text">Classe pour laquelle le niveau est gagn√©</div>
                        </div>

                        <div class="form-group">
                            <label for="pv-actuels">PV actuels :</label>
                            <input type="number" id="pv-actuels" placeholder="56" min="1">
                        </div>

                        <div class="form-group">
                            <label for="mod-constitution">Modificateur de Constitution :</label>
                            <input type="number" id="mod-constitution" placeholder="2" min="-5" max="10">
                        </div>

                        <div class="form-group">
                            <label for="bonus-pv">Bonus de PV (optionnel) :</label>
                            <input type="text" id="bonus-pv" placeholder="2 (Robuste)">
                            <div class="help-text">Ex : 2 (Robuste)</div>
                        </div>
                    </div>

                    <!-- Autres onglets cach√©s pour la d√©mo -->
                    <div id="tab-capacites" class="tab-content">
                        <div class="form-group">
                            <label for="nouvelles-capacites">Nouvelles capacit√©s / ASI :</label>
                            <textarea id="nouvelles-capacites" rows="3" placeholder="Indiquez les nouvelles capacit√©s ou ASI"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nouveau-don">Nouveau(x) don(s) (niveau/ASI) :</label>
                            <textarea id="nouveau-don" rows="3" placeholder="Indiquez les dons obtenus"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="don-quete">Don(s) (gain de qu√™te) :</label>
                            <textarea id="don-quete" rows="3" placeholder="Indiquez les dons obtenus en r√©compense de qu√™te"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nouveaux-sorts">Nouveaux sorts appris :</label>
                            <textarea id="nouveaux-sorts" rows="3" placeholder="Un sort par ligne"></textarea>
                            <div class="help-text">Une entr√©e par ligne</div>
                        </div>
                        <div class="form-group">
                            <label for="sorts-remplaces">Sorts remplac√©s :</label>
                            <textarea id="sorts-remplaces" rows="3" placeholder="Un sort par ligne"></textarea>
                            <div class="help-text">Une entr√©e par ligne</div>
                        </div>
                    </div>
                    <div id="tab-items" class="tab-content">
                        <div class="form-group">
                            <label for="objets-lootes">Objets loot√©s (hors qu√™tes) :</label>
                            <textarea id="objets-lootes" rows="3" placeholder="Une ligne par objet"></textarea>
                            <div class="help-text">Une ligne par objet loot√© hors qu√™te.</div>
                        </div>
                        <div class="form-group">
                            <label for="totaux-inventaire">Totaux d'inventaire (optionnel) :</label>
                            <textarea id="totaux-inventaire" rows="3" placeholder="Total Potion de Gu√©rison sup√©rieure(8d4+8) ==> 2&#10;Total Rations ==> 10"></textarea>
                            <div class="help-text">Utile pour indiquer le nouveau total d'un objet consommable</div>
                        </div>
                        <div class="form-group">
                            <label>Achats / Ventes :</label>
                            <div id="transactions-container"></div>
                            <button type="button" id="add-transaction">Ajouter une ligne</button>
                            <div class="help-text">Format : ACHAT : 2√óPotion 15PO = 30PO / VENTE : Bijou 100PO</div>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="section-marchand">
                            <label for="section-marchand">Activer le bloc Marchand</label>
                        </div>
                    </div>
                    <div id="tab-argent" class="tab-content">
                        <div class="argent-grid">
                            <div class="form-group">
                                <label for="po-lootees">PO loot√©es (hors qu√™tes) :</label>
                                <input type="number" id="po-lootees" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label for="po-recues">PO re√ßues / d√©pens√©es :</label>
                                <input type="number" id="po-recues" placeholder="0">
                                <div class="help-text">Valeurs n√©gatives possibles</div>
                            </div>
                            <div class="form-group">
                                <label for="ancien-solde">Ancien solde :</label>
                                <input type="text" id="ancien-solde" placeholder="Solde avant session" required>
                            </div>
                            <div class="form-group">
                                <label for="total-or">Total en or :</label>
                                <input type="text" id="total-or" placeholder="0 PO" disabled>
                            </div>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="add-pj-delimiter">
                            <label for="add-pj-delimiter">Ajouter la balise PJ</label>
                        </div>
                    </div>
                    <div id="tab-special" class="tab-content">
                        <button type="button" id="toggle-artisanat-btn">Ajouter artisanat</button>
                        <div id="artisanat-section" class="hidden">
                            <h4 style="color: #9b59b6; margin-bottom: 15px;">üî® Session d'Artisanat</h4>

                            <div class="artisanat-grid">
                                <div class="form-group">
                                    <label for="artisanat-type">Type d'artisanat :</label>
                                    <select id="artisanat-type">
                                        <option value="">S√©lectionnez...</option>
                                        <option value="Alchimie">Alchimie</option>
                                        <option value="Forge">Forge / Armurerie</option>
                                        <option value="Couture">Couture / Travail du cuir</option>
                                        <option value="Menuiserie">Menuiserie / Charpenterie</option>
                                        <option value="Joaillerie">Joaillerie</option>
                                        <option value="Calligraphie">Calligraphie / Enluminure</option>
                                        <option value="Herboristerie">Herboristerie</option>
                                        <option value="Cuisine">Cuisine</option>
                                        <option value="Enchantement">Enchantement</option>
                                        <option value="Autre">Autre</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="artisanat-temps">Temps pass√© :</label>
                                    <input type="text" id="artisanat-temps" placeholder="Ex: 8h, 2 jours...">
                                </div>
                            </div>

                            <div class="artisanat-grid">
                                <div class="form-group">
                                    <label for="artisanat-dd">DD du craft :</label>
                                    <input type="number" id="artisanat-dd" placeholder="15">
                                </div>

                                <div class="form-group">
                                    <label for="artisanat-jet">R√©sultat du jet :</label>
                                    <input type="text" id="artisanat-jet" placeholder="Ex: 18 (succ√®s), 12 (√©chec)">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="artisanat-materiaux">Mat√©riaux utilis√©s :</label>
                                <textarea id="artisanat-materiaux" rows="2" placeholder="Ex: 2√ó Fiole vide (1 PO), 1√ó Herbe m√©dicinale (5 PO)"></textarea>
                                <div class="help-text">Liste des composants/mat√©riaux avec leur co√ªt</div>
                            </div>

                            <div class="form-group">
                                <label for="artisanat-items">Objets fabriqu√©s (un par ligne) :</label>
                                <textarea id="artisanat-items" rows="3" placeholder="Potion de soin&#10;Potion de mana"></textarea>
                            </div>

                            <div class="artisanat-grid">
                                <div class="form-group">
                                    <label for="artisanat-cost">Co√ªt total des mat√©riaux (PO) :</label>
                                    <input type="number" id="artisanat-cost" placeholder="0" step="0.01">
                                </div>

                                <div class="form-group">
                                    <label for="artisanat-other-cost">Autres frais (location atelier, etc.) :</label>
                                    <input type="number" id="artisanat-other-cost" placeholder="0" step="0.01">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="artisanat-notes">Notes suppl√©mentaires :</label>
                                <textarea id="artisanat-notes" rows="2" placeholder="Notes additionnelles sur la session d'artisanat..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="copy-btn generate-btn" onclick="generateTemplate()">
                    üîÑ G√©n√©rer le Template
                </button>
            </div>

            <div class="output-section">
                <h3 class="preview-title">üìù Aper√ßu Discord</h3>
                <div id="char-indicator" class="char-indicator"></div>
                <div id="split-warning" class="split-warning hidden"></div>
                <div class="discord-output" id="discord-output"></div>
                <button class="copy-btn" data-target="discord-output">
                    üìã Copier le Message
                </button>
                <div id="discord-output-part2" class="discord-output hidden"></div>
                <button class="copy-btn hidden" id="copy-btn-part2" data-target="discord-output-part2">
                    üìã Copier la Partie 2
                </button>
            </div>
        </div>
    </div>

    <script src="maj-fiche-script.js"></script>
</body>
</html>
