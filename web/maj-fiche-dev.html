<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ G√©n√©rateur de Mise √† Jour de Fiche D&D - DEV</title>
    <link rel="stylesheet" href="maj-fiche-styles.css">
    <style>
        /* Badge DEV en haut √† droite */
        .dev-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e74c3c;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3); }
            50% { box-shadow: 0 2px 20px rgba(231, 76, 60, 0.6); }
            100% { box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3); }
        }

        /* Navigation entre les pages */
        .nav-links {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .nav-link {
            display: inline-block;
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-link:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .header {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="dev-badge">
        üöß VERSION D√âVELOPPEMENT
    </div>

    <div class="nav-links">
        <a href="index.html" class="nav-link">üé≤ Calculateur PV</a>
        <a href="maj-fiche-dev.html" class="nav-link">üìù G√©n√©rateur Fiche (DEV)</a>
    </div>

    <div class="container">
        <div class="header">
            <h1>üé≤ G√©n√©rateur de Mise √† Jour de Fiche</h1>
            <p>Cr√©ez facilement vos messages Discord de mise √† jour D&D 5e</p>
            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                üöß Version de d√©veloppement - Fonctionnalit√©s en cours de test
            </div>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h3>üìã Informations du Personnage</h3>
                
                <div class="form-group">
                    <label for="nom-pj">Nom du PJ :</label>
                    <input type="text" id="nom-pj" placeholder="Nom de votre personnage" required>
                </div>

                <div class="form-group">
                    <label for="multiclasse-toggle">
                        <input type="checkbox" id="multiclasse-toggle" style="width: auto; margin-right: 8px;">
                        Personnage multiclass√©
                    </label>
                </div>

                <div id="classe-simple" class="form-group">
                    <label for="classe">Classe :</label>
                    <select id="classe" required>
                        <option value="" disabled selected>S√©lectionnez une classe</option>
                        <option value="Artificier">Artificier</option>
                        <option value="Barbare">Barbare</option>
                        <option value="Barde">Barde</option>
                        <option value="Clerc">Clerc</option>
                        <option value="Druide">Druide</option>
                        <option value="Ensorceleur">Ensorceleur</option>
                        <option value="Guerrier">Guerrier</option>
                        <option value="Magicien">Magicien</option>
                        <option value="Moine">Moine</option>
                        <option value="Occultiste">Occultiste</option>
                        <option value="Paladin">Paladin</option>
                        <option value="R√¥deur">R√¥deur</option>
                        <option value="Roublard">Roublard</option>
                        <option value="Sorcier">Sorcier</option>
                    </select>
                </div>

                <div id="classe-multi" class="form-group" style="display: none;">
                    <label>Classes (ex: Magicien 13 / Artificier 1) :</label>
                    <input type="text" id="classe-complete" placeholder="Magicien 13 / Artificier 1">
                    <div class="help-text">Format : Classe1 Niveau / Classe2 Niveau / ...</div>
                </div>

                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="showTab('quete', event)">üéØ Qu√™te</button>
                        <button class="tab-btn" onclick="showTab('niveau', event)">üìà Niveau</button>
                        <button class="tab-btn" onclick="showTab('capacites', event)">üõ°Ô∏è Capacit√©s</button>
                        <button class="tab-btn" onclick="showTab('items', event)">üéí Items</button>
                        <button class="tab-btn" onclick="showTab('argent', event)">üí∞ Argent</button>
                        <button class="tab-btn" onclick="showTab('special', event)">‚≠ê Sp√©cial</button>
                    </div>

                    <!-- Tab Content: Qu√™te -->
                    <div id="tab-quete" class="tab-content active">
                        <div id="quetes-container">
                            <div class="quete-bloc" data-quete="0">
                                <h4 style="color: #3498db; margin-bottom: 15px;">üéØ Qu√™te 1</h4>
                                
                                <div class="form-group">
                                    <label for="titre-quete-0">Titre de la Qu√™te :</label>
                                    <input type="text" id="titre-quete-0" placeholder="L'Art de la Paix">
                                </div>

                                <div class="form-group">
                                    <label for="nom-mj-0">Nom du MJ :</label>
                                    <input type="text" id="nom-mj-0" placeholder="@hugotlieb">
                                </div>

                                <div class="checkbox-group">
                                    <input type="checkbox" id="quete-multiple-0">
                                    <label for="quete-multiple-0">Qu√™te avec plusieurs sessions</label>
                                </div>

                                <div id="quete-simple-0" class="form-group">
                                    <label for="lien-recompense-0">Lien vers les r√©compenses :</label>
                                    <input type="text" id="lien-recompense-0" placeholder="https://discord.com/channels/...">
                                    <div class="help-text">Clic droit sur le message ‚Üí Copier le lien</div>
                                </div>

                                <div id="quete-multiple-details-0" class="form-group" style="display: none;">
                                    <label for="sessions-quete-0">Sessions de la qu√™te :</label>
                                    <textarea id="sessions-quete-0" rows="4" placeholder="- https://discord.com/channels/.../... + 1XP,&#10;- https://discord.com/channels/.../... + 1 XP - 1 item"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="xp-quete-0">XP de cette qu√™te :</label>
                                    <input type="number" id="xp-quete-0" placeholder="2" min="0" max="10">
                                </div>

                                <div class="checkbox-group">
                                    <input type="checkbox" id="refuse-xp-0">
                                    <label for="refuse-xp-0">Refuser l‚ÄôXP de cette qu√™te</label>
                                </div>

                                <div class="form-group">
                                    <h5 style="color: #2c3e50; margin-bottom: 10px;">üéÅ R√©compenses (optionnelles) :</h5>

                                    <div class="checkbox-group">
                                        <label for="include-monnaies-0">
                                            <input type="checkbox" id="include-monnaies-0" style="width: auto; margin-right: 8px;">
                                            Inclure monnaies
                                        </label>
                                    </div>
                                    <div id="monnaie-container-0" style="display: none;">
                                        <div class="monnaie-inputs" style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px;">
                                            <input type="number" id="pc-quete-0" placeholder="PC">
                                            <input type="number" id="pa-quete-0" placeholder="PA">
                                            <input type="number" id="po-quete-0" placeholder="PO">
                                            <input type="number" id="pp-quete-0" placeholder="PP">
                                        </div>
                                        <input type="text" id="total-quete-or-0" placeholder="Total en PO" disabled style="margin-top: 5px;">
                                    </div>

                                    <div class="checkbox-group">
                                        <label for="include-objets-0">
                                            <input type="checkbox" id="include-objets-0" style="width: auto; margin-right: 8px;">
                                            Inclure objets
                                        </label>
                                    </div>
                                    <div id="objets-container-0" style="display: none;">
                                        <textarea id="objets-quete-0" rows="2" placeholder="2 √©meraudes d'une valeur de 200PO, un √©trange engrenage en rotation perp√©tuelle"></textarea>
                                    </div>

                                    <div class="reward-type">
                                        <label>‚≠ê Autres r√©compenses :</label>
                                        <textarea id="autres-quete-0" rows="2" placeholder="Don du fruit blanc √† Korn√©lius, Sort Interdiction dans le grimoire"></textarea>
                                    </div>
                                </div>

                                <button type="button" class="delete-quete" onclick="deleteQuete(0)" style="display: none;">
                                    üóëÔ∏è Supprimer cette qu√™te
                                </button>
                            </div>
                        </div>
                        
                        <button type="button" class="add-quete" onclick="addQuete()">
                            ‚ûï Ajouter une autre qu√™te
                        </button>
                    </div>

                    <!-- Autres onglets... -->
                    <div id="tab-niveau" class="tab-content">
                        <div class="form-group">
                            <label for="xp-actuels">XP Actuels :</label>
                            <input type="number" id="xp-actuels" placeholder="3" min="0" max="10">
                            <div class="help-text">Points d'XP d√©j√† obtenus</div>
                        </div>

                        <div class="form-group">
                            <label for="niveau-actuel">Niveau actuel :</label>
                            <input type="number" id="niveau-actuel" placeholder="11" min="1" max="20">
                        </div>

                        <div class="form-group">
                            <label for="niveau-cible">Niveau vis√© :</label>
                            <input type="number" id="niveau-cible" placeholder="12" min="1" max="20">
                            <div class="help-text">Indiquez le niveau apr√®s gain d'XP</div>
                        </div>

                        <div class="form-group">
                            <label for="classe-gain-niveau">Classe gagn√©e :</label>
                            <select id="classe-gain-niveau">
                                <option value="">S√©lectionnez une classe</option>
                                <option value="Artificier">Artificier</option>
                                <option value="Barbare">Barbare</option>
                                <option value="Barde">Barde</option>
                                <option value="Clerc">Clerc</option>
                                <option value="Druide">Druide</option>
                                <option value="Ensorceleur">Ensorceleur</option>
                                <option value="Guerrier">Guerrier</option>
                                <option value="Magicien">Magicien</option>
                                <option value="Moine">Moine</option>
                                <option value="Occultiste">Occultiste</option>
                                <option value="Paladin">Paladin</option>
                                <option value="R√¥deur">R√¥deur</option>
                                <option value="Roublard">Roublard</option>
                                <option value="Sorcier">Sorcier</option>
                            </select>
                            <div class="help-text">Classe pour laquelle le niveau est gagn√©</div>
                        </div>

                        <div class="form-group">
                            <label for="pv-actuels">PV actuels :</label>
                            <input type="number" id="pv-actuels" placeholder="56" min="1">
                        </div>

                        <div class="form-group">
                            <label for="mod-constitution">Modificateur de Constitution :</label>
                            <input type="number" id="mod-constitution" placeholder="2" min="-5" max="10">
                        </div>

                        <div class="form-group">
                            <label for="bonus-pv">Bonus de PV (optionnel) :</label>
                            <input type="text" id="bonus-pv" placeholder="2 (Robuste)">
                            <div class="help-text">Ex : 2 (Robuste)</div>
                        </div>
                    </div>

                    <!-- Autres onglets cach√©s pour la d√©mo -->
                    <div id="tab-capacites" class="tab-content">
                        <div class="form-group">
                            <label for="nouvelles-capacites">Nouvelles capacit√©s / ASI :</label>
                            <textarea id="nouvelles-capacites" rows="3" placeholder="Indiquez les nouvelles capacit√©s ou ASI"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nouveau-don">Nouveau(x) don(s) (niveau/ASI) :</label>
                            <textarea id="nouveau-don" rows="3" placeholder="Indiquez les dons obtenus"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="don-quete">Don(s) (gain de qu√™te) :</label>
                            <textarea id="don-quete" rows="3" placeholder="Indiquez les dons obtenus en r√©compense de qu√™te"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nouveaux-sorts">Nouveaux sorts appris :</label>
                            <textarea id="nouveaux-sorts" rows="3" placeholder="Un sort par ligne"></textarea>
                            <div class="help-text">Une entr√©e par ligne</div>
                        </div>
                        <div class="form-group">
                            <label for="sorts-remplaces">Sorts remplac√©s :</label>
                            <textarea id="sorts-remplaces" rows="3" placeholder="Un sort par ligne"></textarea>
                            <div class="help-text">Une entr√©e par ligne</div>
                        </div>
                    </div>
                    <div id="tab-items" class="tab-content">
                        <div class="form-group">
                            <label for="objets-lootes">Objets loot√©s (hors qu√™tes) :</label>
                            <textarea id="objets-lootes" rows="3" placeholder="Une ligne par objet"></textarea>
                            <div class="help-text">Une ligne par objet loot√© hors qu√™te.</div>
                        </div>
                        <div class="form-group">
                            <label>Achats / Ventes :</label>
                            <div id="transactions-container"></div>
                            <button type="button" id="add-transaction">Ajouter une ligne</button>
                            <div class="help-text">Format : ACHAT : 2√óPotion 15PO = 30PO / VENTE : Bijou 100PO</div>
                        </div>
                        <div class="form-group">
                            <label for="section-marchand">
                                <input type="checkbox" id="section-marchand" style="width: auto; margin-right: 8px;">
                                Activer le bloc Marchand
                            </label>
                        </div>
                    </div>
                    <div id="tab-argent" class="tab-content">
                        <div class="argent-grid">
                            <div class="form-group">
                                <label for="po-lootees">PO loot√©es (hors qu√™tes) :</label>
                                <input type="number" id="po-lootees" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label for="po-recues">PO re√ßues / d√©pens√©es :</label>
                                <input type="number" id="po-recues" placeholder="0">
                                <div class="help-text">Valeurs n√©gatives possibles</div>
                            </div>
                            <div class="form-group">
                                <label for="ancien-solde">Ancien solde :</label>
                                <input type="text" id="ancien-solde" placeholder="Solde avant session" required>
                            </div>
                            <div class="form-group">
                                <label for="total-or">Total en or :</label>
                                <input type="text" id="total-or" placeholder="0 PO" disabled>
                            </div>
                        </div>
                    </div>
                    <div id="tab-special" class="tab-content">
                        <div class="form-group">
                            <label for="artisanat-notes">Notes d'artisanat :</label>
                            <textarea id="artisanat-notes" rows="3" placeholder="Notes sur l'artisanat..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="artisanat-items">Objets fabriqu√©s (un par ligne) :</label>
                            <textarea id="artisanat-items" rows="3" placeholder="Potion de soin\nPotion de mana"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="artisanat-cost">Co√ªt total d'artisanat :</label>
                            <input type="number" id="artisanat-cost" placeholder="0">
                        </div>
                    </div>
                </div>

                <button class="copy-btn generate-btn" onclick="generateTemplate()">
                    üîÑ G√©n√©rer le Template
                </button>
            </div>

            <div class="output-section">
                <h3 class="preview-title">üìù Aper√ßu Discord</h3>
                <div id="char-indicator" class="char-indicator"></div>
                <div id="split-warning" class="split-warning" style="display:none;"></div>
                <div class="discord-output" id="discord-output">Nom du PJ : Gandalf le Gris
Classe : Magicien

** / =======================  PJ  ========================= \ **
**Qu√™te :** [
- La Tour du Mage Noir + @MasterJean ‚Å†- https://discord.com/channels/123456789/987654321/111222333, +3 XP, +150 PO, +Baguette de Boules de Feu (+1)
] +3 XP
**Solde XP :** 8/5 + 3XP obtenue = 11 ==> 11/5 ==> passage au niveau 12 Magicien ‚úÖ
**Gain de niveau :** Niveau 11 ‚Üí **Niveau 12** üéâ
** \ =======================  PJ  ========================= / **
**¬§ Solde :**
ANCIEN SOLDE [SOLDE] + [CHANGEMENTS] = [NOUVEAU_SOLDE]
*Fiche R20 √† jour.*</div>
                <button class="copy-btn" data-target="discord-output">
                    üìã Copier le Message
                </button>
                <div class="discord-output" id="discord-output-part2" style="display: none;"></div>
                <button class="copy-btn" id="copy-btn-part2" data-target="discord-output-part2" style="display: none;">
                    üìã Copier la Partie 2
                </button>
            </div>
        </div>
    </div>

    <script src="maj-fiche-script.js"></script>
</body>
</html>